"use strict";const shell=require("shelljs"),logging=require("debug")("Weaver:bin:commands:add:client"),{getConfig,setConfig,getClientIDs}=require("../../lib/config"),clientIdString=getClientIDs().join(" "),defaultMsg=`Usage
  weaver remove client -i ${clientIdString}
`,commandName="client",commandDesc="Interactive removal of one or more existing clients",removeClients=(a={})=>{const b={...getConfig()},{dataClients:c}=b;if(a&&a.clientIds){const d=a.clientIds.map(a=>a.toString());b.dataClients=c.filter(a=>0>d.indexOf(a.clientId))}return b},commandSpec=a=>(shell.echo(defaultMsg),a.options({i:{alias:"clientIds",demandOption:!0,describe:"The clientIds to remove.",type:"array"}})),commandHandler=a=>{logging("client params",a);const b=removeClients(a);if(b)try{logging("Removing client with clientId"),setConfig(b),shell.echo("Saved new settings:",JSON.stringify(b,null,2))}catch(a){return shell.echo(a),!1}return a};module.exports={commandDesc,commandHandler,commandName,commandSpec,removeClients};